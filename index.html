<!DOCTYPE html>
<!-- newsAPI code with help from "JavaScript Fetch API: Interacting With The News API" by Connor Bailey (https://www.youtube.com/watch?v=fOSGazKFRYE) -->
<html>
	<head>
		<title>News Today</title>
		<link rel="stylesheet" type="text/css" href="/css/main.css">
		
		<style>


		</style>
	</head>
	
	<body>
		<div class="topnav">
			<a class="active" href="#home">Home</a>
			<a href=""> See top news in... </a>
  			<a href="#entertainment">Entertainment</a>
  			<a href="#sports">Sports</a>
  			<a href="#technology">Technology</a>
		</div>
			
		<form class="search" action=""> 
			<label for="">News</label>
			<input class="input" type="text"/>
			<select name="category" id="category">	
				<option value="choose">Choose a category...</option>
 				<option value="Entertainment">Entertainment</option>
  				<option value="Sports">Sports</option>
  				<option value="Technology">Technology</option>
			</select>
			<input type="submit" />
		</form>
		
		<div class="container">
			<ul class="news-list"></ul>
		</div>
		
		<script>
			const searchFrom = document.querySelector('.search'); 
			const input = document.querySelector('.input');
			const newsList = document.querySelector('.news-list');
				
			searchFrom.addEventListener('submit', getNews);
				
			function getNews(e){
				newsList.innerHTML = '';
				e.preventDefault(); 
				
				const apiKey = '78b9d599c4f94f8fa3afb1a5458928d6';
				let searchedFor = input.value; 
				console.log(searchedFor);
				
				//let url = 'https://newsapi.org/v2/everything?q=$(searchedFor)&apiKey=$(apiKey)';

				var url = 'https://newsapi.org/v2/sources?' +
          				'q=' + searchedFor + '&' + 
				    	'category=' + 'sports' + '&' +
          				//'from=2020-10-30&' +
          				'sortBy=popularity&' +
          				'apiKey=' + apiKey; 
				
				/*var url = 'https://newsapi.org/v2/everything?' +
          				'q=' + searchedFor + '&' + 
				    	//'category=' + 'sports' + '&' +
          				//'from=2020-10-30&' +
          				'sortBy=popularity&' +
          				'apiKey=' + apiKey;*/
				
				var req = new Request(url);
				
				fetch(req)
				.then(function(response) {
						response.json().then(data => {
							console.log(data);
							data.sources.forEach(source =>{
								document.createElement('li');
								let li = document.createElement('li');
								let a = document.createElement('a');
								a.setAttribute('href', source.url);
								a.setAttribute('target', '_blank');
								a.textContent = source.title;
								
								let img = document.createElement('img');
								img.src = source.urlToImage; 
								img.alt = "Icon for article"; 
							
								li.appendChild(a); 
								li.appendChild(img); 
								newsList.appendChild(li);
								
							})
							//var obj = JSON.parse(data)
  							// do something with your data
						});

   				 	});
			}
			
			/*var url = 'http://newsapi.org/v2/everything?' +
          			'q=Apple&' +
          			'from=2020-11-04&' +
          			'sortBy=popularity&' +
          			'apiKey=0c8eb80d57034257ac618f8fe5a5fc93';

			var req = new Request(url);

			fetch(req)
   			.then(function(response) {
        			return response.json();
    			})*/
		</script>
		
		
		<!--<nav>
    		<ul>
			<li><a href="">Search</a><li>
			<li>See top news in...<li>
	        	<li><a href="html/browse.html">Entertainment</a></li>
        		<li><a href="html/browse.html">Sports</a></li>
        		<li><a href="html/browse.html">Technology</a></li>
    		</ul>
		</nav>
		
		
		<div class="container">
        		<h1>News Today!</h1>
				<p>Search for entertainment, sports, and technology news  </p>
    		</div>-->
		
		<!--<div class="searchBar">
			<form class="search" action=""> 
				<label for="">News</label>
			<input class="input" type="text" placeholder="Search for news..."/> </br>
				<input type="submit" />
			</form>
			
			
 			<!-- <input type="text" placeholder="Search for news...">
			<select name="category" id="category">	
				<option value="choose">Choose a category...</option>
 				<option value="Entertainment">Entertainment</option>
  				<option value="Sports">Sports</option>
  				<option value="Technology">Technology</option>
			</select> !-->
			
			<!-- <button onclick="myFunction()">Go!</button> -->
		
			<script>
				/*const searchFrom = document.querySelector('.search'); 
				const input = document.querySelector('.input');
				const newsList = document.querySelector('.news-list');
				
				searchFrom.addEventListener('submit', getNews);
				
				function getNews(e){
					const apiKey = '78b9d599c4f94f8fa3afb1a5458928d6';
					let searchedFor = input.value; 
					console.log(searchedFor);
				}
				
				//this function takes in the category and search keywords in order to get a list of 
				 function getNews(category, search) {
				}
				var url = 'https://newsapi.org/v2/everything?' +
          				'q=Apple&' +
          				'from=2020-10-30&' +
          				'sortBy=popularity&' +
          				'apiKey=78b9d599c4f94f8fa3afb1a5458928d6';

				var req = new Request(url);
				var jsonStr;
				var myArticles

				
				var myArticles = jsonStr[0];
				var mainContainer = document.getElementById("myData");
				for ( var i in myArticles) {
					var div = document.createElement("div");
					div.innerHTML = articles[i].title;
					mainContainer.appendChild(div);
				}*/
				
				
				/*function myFunction() {
					fetch(req)
    					.then(function(response) {
						response.json().then(data => {
							console.log(data); 
							//var obj = JSON.parse(data)
							var myArticles = obj[2]; 
							var toAdd; 
							var mainContainer = document.getElementById("myData");
							for (var i in myArticles) {
								var div = document.createElement("div");
								div.innerHTML = articles[i].title;
								mainContainer.appendChild(div);
							}
  							// do something with your data
						});
						//jsonStr = response.json().then(function(json) {
      							// process your JSON further
						//}); 
        					//console.log(jsonStr);
   				 	})
				}*/
				

		</script>
			
		<!-- </div> -->
	</body>
			
			
		<footer>
    		<ul>
        		<li>
			<li><a href="mailto:qu.carolyn@gmail.com.com">email</a></li>
        		<li><a href="https://github.com/qucarolyn">github.com/qucarolyn</a></li>
		</ul>
		<footer>	
